{"ast":null,"code":"import _slicedToArray from\"C:/Users/yeldos.k/Desktop/final-map-app/client/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{useUpdateUserMutation,useDeleteUserMutation}from\"./usersApiSlice\";import{useNavigate}from\"react-router\";import{ROLES}from\"../../config/roles\";import{jsx as _jsx}from\"react/jsx-runtime\";var USER_REGEX=/^[A-z]{3,20}$/;var PWD_REGEX=/^[A-z0-9!@#$%]{4,12}$/;var EditUserForm=function EditUserForm(_ref){var user=_ref.user;var _useUpdateUserMutatio=useUpdateUserMutation(),_useUpdateUserMutatio2=_slicedToArray(_useUpdateUserMutatio,2),updateUser=_useUpdateUserMutatio2[0],_useUpdateUserMutatio3=_useUpdateUserMutatio2[1],isLoading=_useUpdateUserMutatio3.isLoading,isSuccess=_useUpdateUserMutatio3.isSuccess,isError=_useUpdateUserMutatio3.isError,error=_useUpdateUserMutatio3.error;var _useDeleteUserMutatio=useDeleteUserMutation(),_useDeleteUserMutatio2=_slicedToArray(_useDeleteUserMutatio,2),deleteUser=_useDeleteUserMutatio2[0],_useDeleteUserMutatio3=_useDeleteUserMutatio2[1],isDelSuccess=_useDeleteUserMutatio3.isSuccess,isDelError=_useDeleteUserMutatio3.isError,delerror=_useDeleteUserMutatio3.error;var navigate=useNavigate();var _useState=useState(user.username),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),validUsername=_useState4[0],setValidUsername=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),validPassword=_useState8[0],setValidPassword=_useState8[1];var _useState9=useState(user.roles),_useState10=_slicedToArray(_useState9,2),roles=_useState10[0],setRoles=_useState10[1];var _useState11=useState(user.active),_useState12=_slicedToArray(_useState11,2),active=_useState12[0],setActive=_useState12[1];useEffect(function(){setValidUsername(USER_REGEX.test(username));},[username]);useEffect(function(){setValidPassword(PWD_REGEX.test(password));},[password]);useEffect(function(){console.log(isSuccess);if(isSuccess||isDelSuccess){setUsername('');setPassword('');setRoles([]);navigate('/dash/users');}},[isSuccess,isDelSuccess,navigate]);return/*#__PURE__*/_jsx(\"div\",{children:\"Edit\"});};export default EditUserForm;","map":{"version":3,"names":["useState","useEffect","useUpdateUserMutation","useDeleteUserMutation","useNavigate","ROLES","jsx","_jsx","USER_REGEX","PWD_REGEX","EditUserForm","_ref","user","_useUpdateUserMutatio","_useUpdateUserMutatio2","_slicedToArray","updateUser","_useUpdateUserMutatio3","isLoading","isSuccess","isError","error","_useDeleteUserMutatio","_useDeleteUserMutatio2","deleteUser","_useDeleteUserMutatio3","isDelSuccess","isDelError","delerror","navigate","_useState","username","_useState2","setUsername","_useState3","_useState4","validUsername","setValidUsername","_useState5","_useState6","password","setPassword","_useState7","_useState8","validPassword","setValidPassword","_useState9","roles","_useState10","setRoles","_useState11","active","_useState12","setActive","test","console","log","children"],"sources":["C:/Users/yeldos.k/Desktop/final-map-app/client/client/src/features/users/EditUserForm.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useUpdateUserMutation, useDeleteUserMutation } from \"./usersApiSlice\";\r\nimport { useNavigate } from \"react-router\";\r\nimport  { ROLES} from \"../../config/roles\";\r\n\r\nconst USER_REGEX = /^[A-z]{3,20}$/\r\nconst PWD_REGEX = /^[A-z0-9!@#$%]{4,12}$/\r\n\r\n\r\nconst EditUserForm = ({ user }) => {\r\n\r\n    const  [updateUser, {\r\n        isLoading, \r\n        isSuccess,\r\n        isError,\r\n        error\r\n    }] = useUpdateUserMutation()\r\n\r\n    const [deleteUser, {\r\n        isSuccess: isDelSuccess,\r\n        isError: isDelError,\r\n        error: delerror\r\n    }] = useDeleteUserMutation()\r\n\r\n    const navigate = useNavigate()\r\n\r\n    const [username, setUsername] = useState(user.username)\r\n    const [validUsername, setValidUsername] = useState(false)\r\n    const [password, setPassword] = useState('')\r\n    const [validPassword, setValidPassword] = useState(false)\r\n    const [roles, setRoles] = useState(user.roles)\r\n    const [active, setActive] = useState(user.active)\r\n\r\n    useEffect(() => {\r\n        setValidUsername(USER_REGEX.test(username))\r\n    }, [username])\r\n\r\n    useEffect(() => {\r\n        setValidPassword(PWD_REGEX.test(password))\r\n    }, [password])\r\n\r\n    useEffect(() => {\r\n        console.log(isSuccess)\r\n        if (isSuccess || isDelSuccess) {\r\n            setUsername('')\r\n            setPassword('')\r\n            setRoles([])\r\n            navigate('/dash/users')\r\n        }\r\n\r\n    }, [isSuccess, isDelSuccess, navigate])\r\n\r\n    return (\r\n        <div>Edit</div>\r\n    )\r\n}\r\n\r\nexport default EditUserForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}