{"ast":null,"code":"import _toConsumableArray from\"C:/Users/yeldos.k/Desktop/final-map-app/client/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/yeldos.k/Desktop/final-map-app/client/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{YMaps,Map,Placemark,Clusterer,ZoomControl}from'@pbe/react-yandex-maps';import Header from'./Header';import axios from'axios';import{operators}from'../data/operators';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MapComponent=function MapComponent(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedOperators=_useState2[0],setSelectedOperators=_useState2[1];var handleOperatorToggle=function handleOperatorToggle(operatorId){if(selectedOperators.includes(operatorId)){setSelectedOperators(selectedOperators.filter(function(id){return id!==operatorId;}));}else{setSelectedOperators([].concat(_toConsumableArray(selectedOperators),[operatorId]));}};{/* -------------------------------------------------------------------------------- */}var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setIsAdmin=_useState6[1];useEffect(function(){var token=localStorage.getItem('token');// Получаем токен из localStorage\nif(token){axios.post('http://localhost:5000/protected-route',{},{headers:{Authorization:\"Bearer \".concat(token)// Передаем токен в заголовке запроса\n}}).then(function(response){// Обработка успешного ответа\nsetUserData(response.data);console.log(response.data);}).catch(function(error){// Обработка ошибки запроса\nconsole.error('Error:',error);});if(userData.role==='admin'){setIsAdmin(true);}else{setIsAdmin(false);}}},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"map-container\",children:[/*#__PURE__*/_jsx(YMaps,{children:/*#__PURE__*/_jsxs(Map,{defaultState:{center:[42.349170,69.606002],zoom:13},className:\"map-block\",children:[/*#__PURE__*/_jsx(Clusterer,{options:{preset:\"islands#invertedVioletClusterIcons\",clusterDisableClickZoom:true,groupByCoordinates:false},children:operators.map(function(operator){if(selectedOperators.includes(operator.id)){return operator.points.map(function(point){return/*#__PURE__*/_jsx(Placemark,{geometry:point.coordinates,properties:{balloonContent:point.name},options:{iconLayout:'default#image',iconImageHref:operator.pointIcon,iconImageSize:[100,100],iconImageOffset:[-24,-48]}},point.id);});}return null;})}),/*#__PURE__*/_jsx(ZoomControl,{options:{float:'right'}})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-container\",children:[/*#__PURE__*/_jsx(\"p\",{style:{marginTop:\"20px\",fontSize:\"24px\",fontWeight:\"600\",textAlign:'center'},children:\"\\u041A\\u0430\\u0440\\u0442\\u0430 \\u0441\\u0435\\u0442\\u0435\\u0439\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",marginTop:\"-110px\"},children:[/*#__PURE__*/_jsxs(\"label\",{style:{marginRight:\"30px\",marginLeft:\"10px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedOperators.includes(1),onChange:function onChange(){return handleOperatorToggle(1);}}),\"Kcell 5G\"]}),/*#__PURE__*/_jsxs(\"label\",{style:{marginRight:\"30px\",marginLeft:\"10px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedOperators.includes(2),onChange:function onChange(){return handleOperatorToggle(2);}}),\"Kcell \\u0411\\u0421\"]}),/*#__PURE__*/_jsxs(\"label\",{style:{marginRight:\"30px\",marginLeft:\"10px\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedOperators.includes(3),onChange:function onChange(){return handleOperatorToggle(3);}}),\"\\u041A\\u0430\\u0440-\\u0422\\u0435\\u043B \\u0411\\u0421\"]}),/*#__PURE__*/_jsxs(\"label\",{style:{marginRight:\"30px\",marginLeft:\"10px\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedOperators.includes(4),onChange:function onChange(){return handleOperatorToggle(4);}}),\"\\u0421\\u0442\\u0440\\u043E\\u0438\\u0442\\u0435\\u043B\\u044C\\u0441\\u0442\\u0432\\u043E \\u043D\\u043E\\u0432\\u044B\\u0445 \\u0441\\u0435\\u0442\\u0435\\u0439\"]}),/*#__PURE__*/_jsxs(\"label\",{style:{marginRight:\"30px\",marginLeft:\"10px\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedOperators.includes(5),onChange:function onChange(){return handleOperatorToggle(5);}}),\"\\u049A\\u043E\\u0493\\u0430\\u043C\\u0434\\u044B\\u049B Wi-Fi\"]})]})]})]})});};export default MapComponent;","map":{"version":3,"names":["React","useState","useEffect","YMaps","Map","Placemark","Clusterer","ZoomControl","Header","axios","operators","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MapComponent","_useState","_useState2","_slicedToArray","selectedOperators","setSelectedOperators","handleOperatorToggle","operatorId","includes","filter","id","concat","_toConsumableArray","_useState3","_useState4","userData","setUserData","_useState5","_useState6","isAdmin","setIsAdmin","token","localStorage","getItem","post","headers","Authorization","then","response","data","console","log","catch","error","role","children","className","defaultState","center","zoom","options","preset","clusterDisableClickZoom","groupByCoordinates","map","operator","points","point","geometry","coordinates","properties","balloonContent","name","iconLayout","iconImageHref","pointIcon","iconImageSize","iconImageOffset","float","style","marginTop","fontSize","fontWeight","textAlign","display","marginRight","marginLeft","type","checked","onChange","alignItems"],"sources":["C:/Users/yeldos.k/Desktop/final-map-app/client/client/src/components/MapComponent.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { YMaps, Map, Placemark, Clusterer, ZoomControl } from '@pbe/react-yandex-maps';\r\nimport Header from './Header';\r\nimport axios from 'axios';\r\n\r\nimport {operators} from '../data/operators'\r\n\r\n\r\nconst MapComponent = () => {\r\n\r\n  const [selectedOperators, setSelectedOperators] = useState([]);\r\n\r\n  const handleOperatorToggle = (operatorId) => {\r\n    if (selectedOperators.includes(operatorId)) {\r\n      setSelectedOperators(selectedOperators.filter((id) => id !== operatorId));\r\n    } else {\r\n      setSelectedOperators([...selectedOperators, operatorId]);\r\n    }\r\n  };\r\n\r\n\r\n\r\n{/* -------------------------------------------------------------------------------- */}\r\n\r\n\r\nconst [userData, setUserData] = useState(null);\r\nconst [isAdmin, setIsAdmin] = useState(false); \r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token'); // Получаем токен из localStorage\r\n\r\n    if (token) {\r\n      axios.post('http://localhost:5000/protected-route', {}, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`, // Передаем токен в заголовке запроса\r\n        },\r\n      })\r\n        .then((response) => {\r\n          // Обработка успешного ответа\r\n          setUserData(response.data);\r\n          console.log(response.data);\r\n        })\r\n        .catch((error) => {\r\n          // Обработка ошибки запроса\r\n          console.error('Error:', error);\r\n        });\r\n\r\n        if (userData.role === 'admin') {\r\n          setIsAdmin(true);\r\n        } else {\r\n          setIsAdmin(false);\r\n        }\r\n    }\r\n  }, []);\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n    <div className=\"map-container\">\r\n    <YMaps>\r\n      <Map\r\n        defaultState={{ center: [42.349170, 69.606002], zoom: 13 }}\r\n        className='map-block'  \r\n      >\r\n        <Clusterer\r\n          options={{\r\n            preset: \"islands#invertedVioletClusterIcons\",\r\n            clusterDisableClickZoom: true,\r\n            groupByCoordinates: false,\r\n          }}\r\n        >\r\n           {operators.map((operator) => {\r\n            if (selectedOperators.includes(operator.id)) {\r\n               return operator.points.map((point) => (\r\n                  <Placemark\r\n                    key={point.id}\r\n                    geometry={point.coordinates}\r\n                    properties={{\r\n                      balloonContent: point.name,\r\n                    }}\r\n                    options={{\r\n                      iconLayout: 'default#image',\r\n                      iconImageHref: operator.pointIcon,\r\n                      iconImageSize: [100, 100],\r\n                      iconImageOffset: [-24, -48],\r\n                    }}\r\n                  />\r\n                ))\r\n                  }\r\n                return null\r\n              })}\r\n        </Clusterer>\r\n        <ZoomControl options={{ float: 'right' }} />\r\n      </Map>\r\n    </YMaps>\r\n    <div className=\"filter-container\">\r\n      <p style={{marginTop: \"20px\",  fontSize: \"24px\", fontWeight: \"600\", textAlign: 'center'}}>Карта сетей</p>\r\n      <div style={{display: \"grid\", marginTop: \"-110px\"}}>\r\n        <label style={{marginRight: \"30px\", marginLeft: \"10px\"}}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={selectedOperators.includes(1)}\r\n            onChange={() => handleOperatorToggle(1)}\r\n          />\r\n          Kcell 5G\r\n        </label>\r\n        <label style={{marginRight: \"30px\", marginLeft: \"10px\"}}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={selectedOperators.includes(2)}\r\n            onChange={() => handleOperatorToggle(2)}\r\n          />\r\n          Kcell БС\r\n        </label>\r\n        <label style={{marginRight: \"30px\", marginLeft: \"10px\", alignItems: \"center\"}}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={selectedOperators.includes(3)}\r\n            onChange={() => handleOperatorToggle(3)}\r\n          />\r\n          Кар-Тел БС \r\n        </label>\r\n        <label style={{marginRight: \"30px\", marginLeft: \"10px\", alignItems: \"center\"}}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={selectedOperators.includes(4)}\r\n            onChange={() => handleOperatorToggle(4)}\r\n          />\r\n          Строительство новых сетей\r\n        </label>\r\n        <label style={{marginRight: \"30px\", marginLeft: \"10px\", alignItems: \"center\"}}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={selectedOperators.includes(5)}\r\n            onChange={() => handleOperatorToggle(5)}\r\n          />\r\n          Қоғамдық Wi-Fi\r\n        </label>\r\n        {/* Добавьте другие галочки для других операторов */}\r\n      </div>\r\n    </div>\r\n    </div>\r\n    </>\r\n  )\r\n};\r\n\r\n\r\n\r\nexport default MapComponent"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}