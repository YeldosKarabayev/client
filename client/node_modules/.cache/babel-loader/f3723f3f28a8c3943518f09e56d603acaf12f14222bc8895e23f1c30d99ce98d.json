{"ast":null,"code":"import _slicedToArray from\"C:/Users/yeldos.k/Desktop/final-map-app/client/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Signal from'../image/signal-tower.png';import Tulp from'../image/tulip.png';import{useNavigate,Link,useLocation}from'react-router-dom';import{useSendLogoutMutation}from'../features/auth/authApiSlice';import useAuth from'../hooks/useAuth';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DASH_REGEX=/^\\/dash(\\/)?$/;var USERS_REGEX=/^\\/users(\\/)?$/;var Header=function Header(){var _useAuth=useAuth(),isManager=_useAuth.isManager,isAdmin=_useAuth.isAdmin;var navigate=useNavigate();var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useSendLogoutMutatio=useSendLogoutMutation(),_useSendLogoutMutatio2=_slicedToArray(_useSendLogoutMutatio,2),sendLogout=_useSendLogoutMutatio2[0],_useSendLogoutMutatio3=_useSendLogoutMutatio2[1],isLoading=_useSendLogoutMutatio3.isLoading,isSuccess=_useSendLogoutMutatio3.isSuccess,isError=_useSendLogoutMutatio3.isError,error=_useSendLogoutMutatio3.error;useEffect(function(){if(isSuccess)navigate('/');},[isSuccess,navigate]);var onNewUserClicked=function onNewUserClicked(){return navigate('/dash/users/new');};var onUserClicked=function onUserClicked(){return navigate('/dash/users');};var onLogoutClicked=function onLogoutClicked(){return sendLogout();};var dashClass=null;if(!DASH_REGEX.test(pathname)&&!USERS_REGEX.test(pathname)){dashClass=\"dash-header__container--small\";}var newUserButton=null;if(USERS_REGEX.test(pathname)){newUserButton=/*#__PURE__*/_jsx(\"button\",{className:\"headerButton\",title:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\",onClick:onNewUserClicked});}var userButton=null;if(isManager||isAdmin){if(USERS_REGEX.test(pathname)&&pathname.includes('/dash')){newUserButton=/*#__PURE__*/_jsx(\"button\",{className:\"headerButton\",title:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\\u0438\",onClick:onUserClicked});}}var logoutButton=/*#__PURE__*/_jsx(\"button\",{className:\"headerButton\",title:\"\\u0412\\u044B\\u0439\\u0442\\u0438\",onClick:sendLogout,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"});var errClass=isError?\"errmsg\":\"offscreen\";var buttonContent;if(isLoading){buttonContent=/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u044B\\u0445\\u043E\\u0434 \\u0438\\u0437 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u044B...\"});}else{buttonContent=/*#__PURE__*/_jsxs(_Fragment,{children:[newUserButton,userButton,logoutButton]});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{alignItems:\"center\",justifyContent:\"space-between\",display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:'center',fontSize:\"22px\",color:\"#fff\",marginLeft:\"0px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:Tulp,style:{width:\"38px\",height:\"38px\",marginRight:\"10px\"},alt:\"logo\"}),\"SHYMKENT\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"headerRight\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:'center',fontSize:\"22px\",color:\"#fff\"},children:[\"\\u041E\\u043F\\u0435\\u0440\\u0430\\u0442\\u043E\\u0440\\u044B \\u0441\\u0432\\u044F\\u0437\\u0438\",/*#__PURE__*/_jsx(\"img\",{src:Signal,style:{width:\"36px\",height:\"36px\",marginLeft:\"10px\"},alt:\"logo\"})]}),buttonContent]})]})})});};export default Header;","map":{"version":3,"names":["useState","useEffect","Signal","Tulp","useNavigate","Link","useLocation","useSendLogoutMutation","useAuth","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DASH_REGEX","USERS_REGEX","Header","_useAuth","isManager","isAdmin","navigate","_useLocation","pathname","_useSendLogoutMutatio","_useSendLogoutMutatio2","_slicedToArray","sendLogout","_useSendLogoutMutatio3","isLoading","isSuccess","isError","error","onNewUserClicked","onUserClicked","onLogoutClicked","dashClass","test","newUserButton","className","title","onClick","userButton","includes","logoutButton","children","errClass","buttonContent","style","alignItems","justifyContent","display","fontSize","color","marginLeft","src","width","height","marginRight","alt"],"sources":["C:/Users/yeldos.k/Desktop/final-map-app/client/client/src/components/Header.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport Signal from '../image/signal-tower.png'\r\nimport Tulp from '../image/tulip.png'\r\nimport { useNavigate, Link, useLocation } from 'react-router-dom';\r\n\r\nimport { useSendLogoutMutation } from '../features/auth/authApiSlice';\r\nimport useAuth from '../hooks/useAuth';\r\n\r\n\r\nconst DASH_REGEX = /^\\/dash(\\/)?$/\r\nconst USERS_REGEX = /^\\/users(\\/)?$/\r\n\r\n\r\nconst Header = () => {\r\n    const { isManager, isAdmin } = useAuth()\r\n\r\n  const navigate = useNavigate()\r\n  const { pathname } = useLocation()\r\n\r\n  const [sendLogout, {\r\n      isLoading,\r\n      isSuccess,\r\n      isError, \r\n      error\r\n  }] = useSendLogoutMutation()\r\n\r\n\r\n  useEffect(() => {\r\n      if(isSuccess) navigate('/')\r\n  }, [isSuccess, navigate])\r\n\r\n  const onNewUserClicked = () => navigate('/dash/users/new')\r\n  const onUserClicked = () => navigate('/dash/users')\r\n  const onLogoutClicked = () => sendLogout()\r\n\r\n\r\n\r\n  let dashClass = null\r\n    if (!DASH_REGEX.test(pathname) && !USERS_REGEX.test(pathname)) {\r\n        dashClass = \"dash-header__container--small\"\r\n    }\r\n\r\n    let newUserButton = null\r\n    if (USERS_REGEX.test(pathname)) {\r\n        newUserButton = (\r\n            <button\r\n                className='headerButton'\r\n                title='Новый пользователь'\r\n                onClick={onNewUserClicked}\r\n            ></button>\r\n        )\r\n    }\r\n\r\n    let userButton = null\r\n    if(isManager || isAdmin) {\r\n        if (USERS_REGEX.test(pathname) && pathname.includes('/dash')) {\r\n            newUserButton = (\r\n                <button\r\n                    className='headerButton'\r\n                    title='Пользовательи'\r\n                    onClick={onUserClicked}\r\n                ></button>\r\n            )\r\n        }\r\n    }\r\n\r\n    const logoutButton = (\r\n      <button\r\n          className=\"headerButton\"\r\n          title=\"Выйти\"\r\n          onClick={sendLogout}\r\n      >\r\n        Выйти\r\n      </button>\r\n  )\r\n\r\n  const errClass = isError ? \"errmsg\" : \"offscreen\"\r\n\r\n  let buttonContent\r\n  if(isLoading) {\r\n    buttonContent = <p>Выход из системы...</p>\r\n  } else {\r\n    buttonContent = (\r\n        <> \r\n            {newUserButton}\r\n            {userButton}\r\n            {logoutButton}\r\n        </>\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n    {/* <p className={errClass}>{error?.data?.message}</p> */}\r\n\r\n    <div className='header'>\r\n        <div className='container' style={{alignItems: \"center\", justifyContent: \"space-between\", display: \"flex\"}}>\r\n            <div style={{display: \"flex\", alignItems: 'center', fontSize: \"22px\", color: \"#fff\", marginLeft: \"0px\"}}>\r\n                <img src={Tulp} style={{width: \"38px\", height: \"38px\", marginRight: \"10px\"}} alt=\"logo\" />\r\n                SHYMKENT\r\n            </div>\r\n            <div className='headerRight'>\r\n            <div style={{display: \"flex\", alignItems: 'center', fontSize: \"22px\", color: \"#fff\"}}>\r\n                Операторы связи\r\n                <img src={Signal} style={{width: \"36px\", height: \"36px\", marginLeft: \"10px\"}} alt=\"logo\" />\r\n            </div>\r\n             {buttonContent}\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Header"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}